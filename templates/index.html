{%- extends "base.html" %}

{% block content %}
  <div class="container">
    <div class="jumbotron" style="background-color: rgb(199, 168, 247);">
      <h2>Hello. :-)</h2>
      <p>Made with <span class="glyphicon glyphicon-heart" style="color: rgb(77, 14, 179);"></span> to help you turn Youtube videos into .mp3 files.<br />Simply enter a Youtube URL, click 'Get!', and then watch the magical robots do their work.</p>
      <form role="form" ng-submit="enqueue()">
        <div class="row">
          <div class="col-lg-6">
          <input type="text" class="form-control input-lg" name="yturl" ng-model="yturl" size=40 placeholder="Enter a Youtube URL" />
          </div>
          <button class="btn btn-lg btn-primary">
            <span class="glyphicon glyphicon-cloud-download"></span> Get!
          </button>
        </div>
        <!--<div class="row">
          What would you like from it?
          <input type='radio' name='component' value='audio' checked=''/>Just the Audio
          <input type='radio' name='component' value='video' disabled=''/>Audio and Video
        </div>-->
      </form>
    </div>

    <div class="row">
    <div class="col-md-12">
    {% raw %}
        <div ng-repeat="alert in alerts" class="alert alert-{{ alert.style }}" role="alert">
            {{ alert.text }}
        </div>
    {% endraw %}
    </div>
    </div>

    <div class="row">
    <div class="panel panel-info">
    <div class="panel-heading">Queued Downloads <span ng-show="anythingActive()" class="glyphicon glyphicon-refresh glyphicon-spin"></span></div>
    <table class="table table-striped">
      <thead><tr>
        <th>Submitted</th>
        <th>Job ID</th>
        <th>Requested Video</th>
        <th>Job Status</th>
      </tr></thead>
      <tbody>
      {% raw %}
        <tr ng-repeat="job in jobs">
          <td>{{ job.submitted }}</td>
          <td><a href="{{ job.results_url }}">{{ job.job_id }}</a></td>
          <td><a href="{{ job.request_url }}">{{ job.page_title }}</a></td>
          <td style="text-transform: capitalize">
            <span class="label label-{{ job.label }}">{{ job.status }}</span>
          </td>
        </tr>
      {% endraw %}
        <tr ng-show="!jobs.length">
          <td><i>Looks like there aren't any jobs queued up yet.</i></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>

    <div class="row">
    <div class="panel panel-success">
    <div class="panel-heading">Completed Downloads</div>
    <table class="table table-striped">
      <thead><tr>
        <th>Name</th>
        <th>Downloaded At</th>
        <th>File Size (Bytes)</th>
      </tr></thead>
      <tbody>
      {% raw %}
        <tr ng-repeat="file in downloaded">
          <td><a href="{{ file.url }}">{{ file.name }}</a></td>
          <td>{{ file.modified }}</td>
          <td>{{ file.size }}</td>
        </tr>
      {% endraw %}
        <tr ng-show="!downloaded.length">
          <td><i>Looks like there isn't anything here yet. Try downloading something using the search box, above.</i></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    </div>
    </div>

  </div>
{%- endblock %}
